version: "3"
services:

  postgres:
    image: postgres
    volumes:
      - ../data/postgres/data:/var/lib/postgresql/data

#  nginx-proxy:
#    image: nginx
#    ports: 
#      - "80:80"
#    volumes:
#      - ../config-files/nginx/conf.d:/etc/nginx/conf.d
    
  pgadmin:
    image: dpage/pgadmin4
    volumes:
      - ../data/pgadmin:/var/lib/pgadmin
    environment:
      - PGADMIN_DEFAULT_EMAIL=lukas.lakner95@gmail.com
      - PGADMIN_DEFAULT_PASSWORD=hallo1234

  confluence:
    image: atlassian/confluence-server
    ports: 
      - "8090:8090"
      - "8091:8091"
    mem_limit: 
    mem_reservation: 512m
    volumes:
      - ../data/confluence/home:/var/atlassian/application-data/confluence
    environment:
      - CATALINA_CONNECTOR_PROXYNAME=confluence.candoo.at
      - CATALINA_CONNECTOR_PROXYPORT=80
      - CATALINA_CONNECTOR_SCHEME=http
      - CATALINA_CONNECTOR_SECURE=false
    
#  gitlab:
#    image: gitlab/gitlab-ce
#    hostname: git.candoo.at
#    volumes:
#      - ../config-files/gitlab:/etc/gitlab
#      - ../logs/gitlab:/var/log/gitlab
#      - ../data/gitlab:/var/opt/gitlab
